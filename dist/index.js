"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("react");exports.create=e=>{let t={};const o=new Map,n=(r,e)=>{let t=null;try{if(!r)return;t=o.get(r),t||(t=new Set,o.set(r,t)),t.add(e)}catch(r){console.log("error has occured in the subscription function",r)}finally{return()=>{t&&(t.delete(e),0===t.size&&o.delete(r))}}},c=(r,e=null)=>{try{if(t={...t,...r(t)},!e)return void o.forEach((r=>r.forEach((r=>r()))));Array.isArray(e)?e.forEach((r=>o.get(r)?.forEach((r=>r())))):o.get(e)?.forEach((r=>r()))}catch(r){console.log("error has occured in the set function",r)}};t=e(c);const a=()=>t;return(e,t,i=null)=>{if(!e)throw new Error("invalid selector");if("function"==typeof e){if(!t&&"function"!=typeof e(a()))for(;t=crypto.randomUUID(),o.has(t););return r.useSyncExternalStore((r=>n(t,r)),(()=>e(a())),(()=>i??e(a())))}return Array.isArray(e)?e.map((e=>r.useSyncExternalStore((r=>n(t,r)),(()=>a()[e]),(()=>i??a()[e])))):[a(),c]}};

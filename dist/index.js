"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");exports.create=r=>{let t={};const a=new Map,n=(e,r)=>{if(e&&a.has(e))throw new Error("cannot have two states with same key");return a.set(e,r),()=>{a.delete(e)}},o=(e,r=null)=>{t={...t,...e(t)},r?Array.isArray(r)?r.forEach((e=>a.has(e)&&a.get(e)())):a.has(r)&&a.get(r)():a.forEach(((e,r,t)=>e()))};t=r(o);const s=()=>t;return(r,t,c=null)=>{if("function"==typeof r){if(!t&&"function"!=typeof r(s()))for(;t=crypto.randomUUID(),a.has(t););return e.useSyncExternalStore((e=>n(t,e)),(()=>r(s())),(()=>c||r(s())))}return Array.isArray(r)?r.map((r=>e.useSyncExternalStore((e=>n(t,e)),(()=>s()[r]),(()=>c||s()[r])))):[s(),o]}};
